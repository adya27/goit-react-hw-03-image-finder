(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{23:function(t,e,a){},25:function(t,e,a){},26:function(t,e,a){},53:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(0),o=a.n(r),c=a(7),s=a.n(c),i=(a(23),a(8)),l=a.n(i),u=a(10),h=a(3),d=a(4),m=a(6),p=a(5),b=(a(25),a(26),a(15)),f=a.n(b),g=a(11),j=(a(51),a(16)),v=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={search:""},t.handleChange=function(e){var a=e.currentTarget,n=a.name,r=a.value;t.setState(Object(j.a)({},n,r))},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.search)},t}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:"SearchForm",children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{name:"search",onChange:this.handleChange,value:this.state.search,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(r.Component),O=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={currentImg:"",showModal:!1},t.handleClick=function(e){t.setState({currentImg:e.currentTarget.dataset.largesrc}),t.props.onClick(e.currentTarget.dataset.largesrc)},t}return Object(d.a)(a,[{key:"render",value:function(){var t=this.props,e=t.webformatURL,a=t.largeImageURL;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{onClick:this.handleClick,"data-largesrc":a,src:e,alt:"",className:"ImageGalleryItem-image"})})}}]),a}(r.Component),y=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).onClick=function(e){t.props.onClick(e)},t}return Object(d.a)(a,[{key:"render",value:function(){var t=this,e=this.props.match;return Object(n.jsx)("ul",{className:"ImageGallery",children:e.map((function(e){return Object(n.jsx)(O,{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,onClick:t.onClick},e.id)}))})}}]),a}(r.Component),w=document.querySelector("#modal-root"),x=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).onKeyDown=function(e){var a=t.props.closeModal;"Escape"===e.code&&a()},t.onClickOverlay=function(e){var a=t.props.closeModal;e.target===e.currentTarget&&a()},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),document.body.style.overflow="hidden",document.body.style.position="fixed"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),document.body.style.overflow="auto",document.body.style.position="static"}},{key:"render",value:function(){var t=this.props.largeImageURL;return Object(c.createPortal)(Object(n.jsx)("div",{onClick:this.onClickOverlay,className:"Overlay",children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:t,alt:""})})}),w)}}]),a}(r.Component);var k=function(t){var e=t.loadMore;return Object(n.jsx)("button",{onClick:e,className:"Button",type:"button",children:"Load more"})},S=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={match:[],showModal:!1,currentImg:"",page:1,search:"",status:"idle"},t.onSubmit=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({status:"pending"});case 2:return e.next=4,t.setState({search:a});case 4:return e.next=6,fetch("https://pixabay.com/api/?key=17537629-2ee3a1e1cfb1c48a1e1039472&q=".concat(a,"&image_type=photo&pretty=true&page=1&per_page=").concat(12*t.state.page)).then((function(t){return t.json()})).then((function(e){return 0===e.total&&(t.setState({status:"rejected"}),g.NotificationManager.error("No matches founded","404",3e3)),e})).then((function(e){return t.setState({match:e.hits})}));case 6:return e.next=8,t.setState({status:"idle"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.toggleModal=function(){t.setState({showModal:!t.state.showModal})},t.loadMore=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState((function(t){return{page:t.page+1}}));case 2:return e.next=4,t.onSubmit(t.state.search);case 4:case"end":return e.stop()}}),e)}))),t.onClick=function(e){t.setState({currentImg:e}),t.toggleModal()},t}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t,e){e.search!==this.state.search?(this.setState({page:1}),window.scrollTo({top:0,behavior:"smooth"})):1!==this.state.page&&e.showModal===this.state.showModal&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(v,{onSubmit:this.onSubmit}),Object(n.jsx)(g.NotificationContainer,{}),Object(n.jsx)(y,{onClick:this.onClick,match:this.state.match}),"pending"===this.state.status&&Object(n.jsx)(f.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}),this.state.showModal&&Object(n.jsx)(x,{closeModal:this.toggleModal,largeImageURL:this.state.currentImg}),this.state.match.length%12===0&&0!==this.state.match.length&&"pending"!==this.state.status&&Object(n.jsx)(k,{loadMore:this.loadMore})]})}}]),a}(r.PureComponent),C=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,o=e.getLCP,c=e.getTTFB;a(t),n(t),r(t),o(t),c(t)}))};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),C()}},[[53,1,2]]]);
//# sourceMappingURL=main.f517107c.chunk.js.map