(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{18:function(t,e,n){},19:function(t,e,n){},20:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n(0),c=n.n(o),r=n(7),s=n.n(r),i=(n(18),n(10)),l=n(3),u=n(4),h=n(6),m=n(5),d=(n(19),n(20),n(11)),p=n.n(d),b=n(9),g=(n(42),n(12)),f=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={search:""},t.handleChange=function(e){var n=e.currentTarget,a=n.name,o=n.value;t.setState((function(){return Object(g.a)({},a,o)}))},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.search)},t}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)("header",{className:"Searchbar",children:Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"SearchForm",children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{name:"search",onChange:this.handleChange,value:this.state.search,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),n}(o.Component),j=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={currentImg:"",showModal:!1},t.handleClick=function(e){t.setState({currentImg:e.currentTarget.dataset.largesrc}),t.props.onClick(e.currentTarget.dataset.largesrc)},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props,e=t.webformatURL,n=t.largeImageURL;return Object(a.jsx)("li",{className:"ImageGalleryItem",children:Object(a.jsx)("img",{onClick:this.handleClick,"data-largesrc":n,src:e,alt:"",className:"ImageGalleryItem-image"})})}}]),n}(o.Component),y=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).onClick=function(e){t.props.onClick(e)},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e=this.props.match;return Object(a.jsx)("ul",{className:"ImageGallery",children:e.map((function(e){return Object(a.jsx)(j,{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,onClick:t.onClick},e.id)}))})}}]),n}(o.Component),v=document.querySelector("#modal-root"),O=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).onKeyDown=function(e){var n=t.props.closeModal;"Escape"===e.code&&n()},t.onClickOverlay=function(e){var n=t.props.closeModal;e.target===e.currentTarget&&n()},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),document.body.style.overflow="hidden",document.body.style.position="fixed"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),document.body.style.overflow="auto",document.body.style.position="static"}},{key:"render",value:function(){var t=this.props.largeImageURL;return Object(r.createPortal)(Object(a.jsx)("div",{onClick:this.onClickOverlay,className:"Overlay",children:Object(a.jsx)("div",{className:"Modal",children:Object(a.jsx)("img",{src:t,alt:""})})}),v)}}]),n}(o.Component);var w=function(t){var e=t.loadMore;return Object(a.jsx)("button",{onClick:e,className:"Button",type:"button",children:"Load more"})},k=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={match:[],showModal:!1,currentImg:"",page:1,search:"",status:"idle"},t.notify=function(){return b.b.error("Sorry, no matches :(")},t.onSubmit=function(e,n){t.setState((function(t){return{status:"pending",search:e}})),console.log("page in onSubmit",t.state),fetch("https://pixabay.com/api/?key=17537629-2ee3a1e1cfb1c48a1e1039472&q=".concat(e,"&image_type=photo&pretty=true&page=").concat(n,"&per_page=12")).then((function(t){return t.json()})).then((function(e){return 0===e.total&&(t.setState((function(){return{status:"rejected"}})),t.notify()),e})).then((function(e){return t.setState((function(t){return{match:[].concat(Object(i.a)(t.match),Object(i.a)(e.hits)),status:"idle"}}))}))},t.toggleModal=function(){t.setState((function(){return{showModal:!t.state.showModal}}))},t.loadMore=function(){t.incrementPage(),t.onSubmit(t.state.search,t.state.page+1)},t.onClick=function(e){t.setState({currentImg:e}),t.toggleModal()},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log("CDM",this.state),this.setState((function(){return{page:1,match:[]}}))}},{key:"componentDidUpdate",value:function(t,e){console.log("CDU",this.state),e.search!==this.state.search?(console.log("ZERO"),this.setState((function(){return{page:1,match:[]}})),window.scrollTo({top:0,behavior:"smooth"})):1!==this.state.page&&e.showModal===this.state.showModal&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"incrementPage",value:function(){this.setState((function(t){return{page:t.page+1}}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(f,{onSubmit:this.onSubmit}),Object(a.jsx)(b.a,{}),Object(a.jsx)(y,{onClick:this.onClick,match:this.state.match}),"pending"===this.state.status&&Object(a.jsx)(p.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}),this.state.showModal&&Object(a.jsx)(O,{closeModal:this.toggleModal,largeImageURL:this.state.currentImg}),this.state.match.length%12===0&&0!==this.state.match.length&&"pending"!==this.state.status&&Object(a.jsx)(w,{loadMore:this.loadMore})]})}}]),n}(o.PureComponent),S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),o(t),c(t),r(t)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(k,{})}),document.getElementById("root")),S()}},[[43,1,2]]]);
//# sourceMappingURL=main.fc883204.chunk.js.map